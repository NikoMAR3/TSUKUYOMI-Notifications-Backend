server.port=8083
spring.application.name=notificaciones-service

spring.data.mongodb.uri=mongodb+srv://manuelguarnizog_db_user:slmEouXGl5LaTDbg@clustereciexpress.m7ljcsf.mongodb.net/notificaciones-db?retryWrites=true&w=majority&appName=ClusterECIEXPRESS
spring.data.mongodb.database=Notifications-db
spring.data.mongodb.auto-index-creation=true

# Configuración Redis
spring.data.redis.host=redis
spring.data.redis.port=6379
spring.data.redis.enabled=true

# Habilitar listener de Redis
redis.listener.enabled=true

# ELIMINA cualquier configuración de email anterior y usa SOLO esto:
spring.mail.host=127.0.0.1
spring.mail.port=1025
spring.mail.protocol=smtp
spring.mail.test-connection=false

# CONFIGURACIÓN SMTP EXPLÍCITA
spring.mail.properties.mail.smtp.host=127.0.0.1
spring.mail.properties.mail.smtp.port=1025
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false
spring.mail.properties.mail.smtp.ssl.enable=false
spring.mail.properties.mail.smtp.connectiontimeout=3000
spring.mail.properties.mail.smtp.timeout=3000

# DESHABILITAR VALIDACIONES
spring.mail.properties.mail.smtp.localhost=127.0.0.1
spring.mail.properties.mail.smtp.ssl.trust=*
spring.mail.properties.mail.smtp.ssl.checkserveridentity=false

spring.jackson.date-format=com.fasterxml.jackson.databind.util.StdDateFormat
spring.jackson.property-naming-strategy=SNAKE_CASE
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.serialization.write-dates-as-timestamps=false

springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true

management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always

spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration
security.basic.enabled=false
management.security.enabled=false
spring.security.oauth2.client.registration.enabled=false

# CORREGIDO: Más logging para debug de email y Redis
logging.level.edu.dosw=DEBUG
logging.level.org.springframework.mail=TRACE
logging.level.com.sun.mail=TRACE
logging.level.org.springframework.data.redis=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.springframework.data.mongodb=INFO
logging.level.org.hibernate=INFO
logging.level.org.springframework.messaging=DEBUG

spring.web.resources.add-mappings=true
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.cache.period=3600

spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=notifications-task-